---
layout: post
title: "軟體部署"
date: 2016-04-07T09:37:05+08:00
comments: true
external-url: 
categories: 
---

學長 @crazylion 推薦一篇關於軟體部署的長文：[How to deploy software](https://zachholman.com/posts/deploying-software)
作者是這位 [Zach Holman](https://zachholman.com)

原文的副標題就點出了大原則：

> Make your team’s deploys as boring as hell and stop stressing about it.

> 部署這件事，越無聊越沒有壓力越好。

原文很長，所以我邊讀邊記錄如下，文章結構比對原文。
這篇不是翻譯，我英文也不是很好，權作為閱讀記錄而已。

---

# 聊聊部署這事

每次程式碼有變動，都會帶來潛在的風險。
只要有改動，就有一定的機率會把事情搞糟。

沒有人喜歡服務中斷，沒有人想面對狂怒的使用者，也沒有人想要被專案經理追殺。
所以每次發佈程式碼都是一件非常刺激而且壓力十足的事情。

但我覺得這樣是不對，我會一再強調以下這件事：

> 程式的部署，應該越無聊、越單調越好，
> 讓部署這件事可以非常直接的、完全沒有壓力的在執行。

發佈新功能應該要是一件非常輕易的事情，輕易到就像是在 Hacker News 發起：
「縮排到底是要用『空白 (spaces)』還是『縮進 (tabs)』」討戰文這麽簡單。
（註：看來大家都很愛吵，例如 Vim 跟 Emacs 到底哪一個更好？)

部署即便是對新人而言，都是淺顯易懂的，馬上就可以學會的；
部署是不能出錯的（不能有例外錯誤，或是必須要有良好的錯誤處理機制）；
新上線的程式碼在被任何一個終端使用者看到之前，每一行都必須經過良好的測試。

這篇文章是從比較高的抽象層面來談「部署」這件事，大概分這幾個方面：
協作、安全（可靠的）、步調（節奏、流程）

當然，實做細節確實有很多可以談的，但說到底還是為了處理這三個方面的東西。
我覺得團隊合作的時候，部署是最重要的一個工作環節。

這篇文章很多東西源自於我過去五年就職於 Github 的經驗，以及去年到處當顧問的經驗，
特別是我顧問一家專注於提供協作、部署服務的公司 Dockbit 的經驗，很多可以講。

還有好些我的朋友：Corey Donohoe (Heroku)、Jesse Toth (GitHub)、Aman Gupta
(GitHub)、Paul Betts (Slack)，都來跟我分享他們的經驗跟做法。
每家公司的實作細節不盡相同，但是大方向、大道理是相通的。

抱歉，前言就廢話那麽多了，但這真的是一篇長文，哈，哈，哈。

# 綱要

1. 釐清目標
   部署是一個可以被解決的問題嗎？

2. 部署前的準備工作
   思考一下測試、版本規劃，還有程式碼協同開發的問題。

3. 程式碼版本分支
   程式碼建立分支（Branch） 是部署工作中的基礎，想想不同分支與部署流程的搭配。

4. 部署的控制
   如何控制部署的執行？不同的執行權限，程式碼的合併、稽查，部署的流程控制。

5. 監控
   好了，程式出去了，該來監控驗證了，收集一些數據，決定是否回復舊版本。

6. 總結
   {% youtube J6VjPM5CeWs %}

# 釐清目標

## 部署
